services:
  backend:
    build: ./backend/
    stop_grace_period: 30s
    init: true
    ports:
      - "0.0.0.0:9001:9001"
    environment:
      PORT: 9001
      ALLOW_ORIGIN: ".*"
      NODE_ENV: production
    restart: unless-stopped

  frontend:
    build:
      context: ./
      dockerfile: Dockerfile.prod
      args:  # âœ… Passar como argumentos de build
        REACT_APP_BROKER_URL: "http://192.168.0.111:9001"
        REACT_APP_VERSION: "1.10.2"
        REACT_APP_MAINTENANCE: "false"
    depends_on:
      - backend
    ports:
      - "0.0.0.0:3001:80"
    restart: unless-stopped